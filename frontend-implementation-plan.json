{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Admin Panel and Login System - Frontend Implementation",
  "requirements": [
    {
      "id": "REQ-19",
      "summary": "Create Admin Login page with authentication form",
      "acceptanceCriteria": [
        "Navigating to /admin shows the login form when not authenticated",
        "Entering correct credentials calls login() and redirects to the admin dashboard",
        "Entering wrong credentials shows 'Invalid credentials' error inline",
        "Page uses the dark navy and gold theme consistent with the rest of the app"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/AdminLogin.tsx",
          "operation": "create",
          "description": "Create a standalone Admin Login page component with a centered card containing Username and Password input fields and a Login button. On form submit, call the backend login(username, password) function using the actor from useActor hook. On success, store the session token in localStorage and redirect to /admin/dashboard using React Router's useNavigate. On failure, display 'Invalid credentials' error message inline below the form. Style with Tailwind using the existing dark navy and gold theme variables."
        },
        {
          "path": "frontend/src/hooks/useAuth.ts",
          "operation": "create",
          "description": "Create a custom hook that manages admin session state. Export functions: getSessionToken() to retrieve token from localStorage, setSessionToken(token) to store it, clearSessionToken() to remove it, and useSessionToken() hook that returns the current token from state. Include a useEffect that syncs with localStorage changes."
        }
      ]
    },
    {
      "id": "REQ-20",
      "summary": "Create Admin Dashboard page with sidebar navigation and logout",
      "acceptanceCriteria": [
        "Visiting /admin/dashboard without a session token redirects to /admin",
        "Sidebar displays links to Tests, Rankers, and Contact Submissions panels",
        "Clicking Logout calls logout(), clears the token, and redirects to /admin"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/AdminDashboard.tsx",
          "operation": "create",
          "description": "Create the Admin Dashboard page component with authentication guard logic that checks for a valid session token using useSessionToken() hook. If no token exists, redirect to /admin using useNavigate and useEffect. Render a layout with a sidebar containing navigation links for Tests, Rankers, and Contact Submissions panels, plus a Logout button. The Logout button should call backend logout(token), then clearSessionToken(), then redirect to /admin. Use React Router Outlet to render child panel routes."
        },
        {
          "path": "frontend/src/components/AdminSidebar.tsx",
          "operation": "create",
          "description": "Create a reusable sidebar component for the Admin Dashboard. Display navigation links using React Router NavLink for Tests (/admin/dashboard/tests), Rankers (/admin/dashboard/rankers), and Contact Submissions (/admin/dashboard/contacts). Include a Logout button that accepts an onClick handler prop. Style with the dark navy and gold theme, highlighting the active nav item."
        }
      ]
    },
    {
      "id": "REQ-21",
      "summary": "Implement Tests management panel with CRUD operations",
      "acceptanceCriteria": [
        "Tests table renders all existing tests with title and category",
        "Add Test modal allows entering title, category, and questions with options",
        "Saving a new test calls addTest() and refreshes the table",
        "Edit action populates the modal with existing data and calls updateTest() on save",
        "Delete action calls deleteTest() and removes the row from the table"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/AdminTests.tsx",
          "operation": "create",
          "description": "Create the Tests management panel component that fetches all tests using the existing useTests query hook. Display a table with columns for id, title, and category. Include an 'Add Test' button that opens the TestFormModal. For each row, include Edit and Delete action buttons. Edit opens the modal with pre-filled data; Delete calls the backend deleteTest(token, id) mutation, then invalidates the tests query. Show loading skeletons while fetching."
        },
        {
          "path": "frontend/src/components/TestFormModal.tsx",
          "operation": "create",
          "description": "Create a modal dialog component for adding/editing tests. Include form fields for Title (text input), Category (dropdown with options: UPSC, BPSC, SSC, Railway, State Exams), and a dynamic questions editor. The questions editor should allow adding/removing question entries, each with: question text, four option inputs, and a radio selector for the correct answer. Accept props for initial test data (for edit mode) and onSave callback. On save, call backend addTest(token, title, category, questions) for new tests or updateTest(token, id, title, category, questions) for edits, passing the session token from useSessionToken hook."
        },
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add TanStack Query mutation hooks for admin test management: useAddTest() that calls backend.addTest(token, title, category, questions), useUpdateTest() that calls backend.updateTest(token, id, title, category, questions), and useDeleteTest() that calls backend.deleteTest(token, id). Each mutation should invalidate the tests query on success. Include error handling for invalid session tokens."
        }
      ]
    },
    {
      "id": "REQ-22",
      "summary": "Implement Rankers management panel with add and delete operations",
      "acceptanceCriteria": [
        "Rankers table shows all rankers with rank, name, category, and score",
        "Add Ranker modal captures name, category, and score",
        "Saving calls addRanker() and refreshes the table with updated ranks",
        "Delete action calls deleteRanker() and removes the row"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/AdminRankers.tsx",
          "operation": "create",
          "description": "Create the Rankers management panel component that fetches all rankers using the existing useTopRankers query hook. Display a ranked table with columns for rank, studentName, examCategory, and score. Include an 'Add Ranker' button that opens the RankerFormModal. For each row, include a Delete action button that calls backend deleteRanker(token, rank), then invalidates the rankers query. Show loading skeletons while fetching."
        },
        {
          "path": "frontend/src/components/RankerFormModal.tsx",
          "operation": "create",
          "description": "Create a modal dialog component for adding rankers. Include form fields for Student Name (text input), Exam Category (dropdown matching test categories), and Score (number input). On save, call backend addRanker(token, studentName, examCategory, score) using the session token from useSessionToken hook, then close the modal and invalidate the rankers query to refresh the leaderboard with updated ranks."
        },
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add TanStack Query mutation hooks for admin ranker management: useAddRanker() that calls backend.addRanker(token, studentName, examCategory, score) and useDeleteRanker() that calls backend.deleteRanker(token, rank). Each mutation should invalidate the topRankers query on success. Include error handling for invalid session tokens."
        }
      ]
    },
    {
      "id": "REQ-23",
      "summary": "Implement Contact Submissions panel with read-only table",
      "acceptanceCriteria": [
        "Contact Submissions table fetches and displays all submissions with name, email, message, and timestamp",
        "A loading skeleton or spinner is shown while data is being fetched",
        "Table is read-only with no edit or delete controls"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/AdminContacts.tsx",
          "operation": "create",
          "description": "Create the Contact Submissions panel component that fetches all contact form submissions by calling backend getContactSubmissions(token) with the session token from useSessionToken hook. Display a read-only table with columns for name, email, message, and timestamp (formatted as a readable date). Show loading skeletons while fetching. Handle errors if the session token is invalid. No edit or delete actions are needed."
        },
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add a TanStack Query hook useContactSubmissions(token) that calls backend.getContactSubmissions(token). The query should be enabled only when a valid token is provided. Include error handling for invalid session tokens."
        }
      ]
    },
    {
      "id": "REQ-24",
      "summary": "Add client-side routing for admin pages without altering public routes",
      "acceptanceCriteria": [
        "Navigating to / renders the existing full-page public-facing app",
        "Navigating to /admin renders the Admin Login form",
        "Navigating to /admin/dashboard renders the Admin Dashboard (or redirects to /admin if unauthenticated)",
        "Existing public sections are unaffected by the routing change"
      ],
      "file_operations": [
        {
          "path": "frontend/src/main.tsx",
          "operation": "modify",
          "description": "Wrap the App component with BrowserRouter from react-router-dom. Import and configure Routes and Route components to define the routing structure: route / renders the existing App component (all public sections), route /admin renders the AdminLogin page, and route /admin/dashboard/* renders the AdminDashboard with nested routes for /admin/dashboard/tests (AdminTests), /admin/dashboard/rankers (AdminRankers), and /admin/dashboard/contacts (AdminContacts). Ensure the existing QueryClientProvider and InternetIdentityProvider wrappers remain in place."
        },
        {
          "path": "frontend/package.json",
          "operation": "modify",
          "description": "Add react-router-dom as a dependency to support client-side routing. Include version ^6.20.0 or compatible."
        }
      ]
    }
  ]
}